-- ‚ö° ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏°‡∏ô‡∏π ‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏ß + ‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤ (‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ)
-- by ChatGPT (‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÇ‡∏Å‡∏á)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

local speed = 16 -- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏õ‡∏Å‡∏ï‡∏¥
local locked = false
local target = nil
local menuOpen = false
local maxDistance = 150

-- üß± GUI ‡∏´‡∏•‡∏±‡∏Å
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.ResetOnSpawn = false

-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π
local toggleButton = Instance.new("TextButton")
toggleButton.Parent = gui
toggleButton.Size = UDim2.new(0, 120, 0, 50)
toggleButton.Position = UDim2.new(0, 20, 1, -70)
toggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.TextScaled = true
toggleButton.Text = "üìú ‡πÄ‡∏°‡∏ô‡∏π"

-- ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å
local menuFrame = Instance.new("Frame")
menuFrame.Parent = gui
menuFrame.Size = UDim2.new(0, 220, 0, 200)
menuFrame.Position = UDim2.new(0, 20, 1, -280)
menuFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
menuFrame.Visible = false
menuFrame.BorderSizePixel = 2
menuFrame.BorderColor3 = Color3.fromRGB(255, 0, 0)

-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤
local lockButton = Instance.new("TextButton")
lockButton.Parent = menuFrame
lockButton.Size = UDim2.new(1, -20, 0, 50)
lockButton.Position = UDim2.new(0, 10, 0, 20)
lockButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
lockButton.TextColor3 = Color3.new(1, 1, 1)
lockButton.TextScaled = true
lockButton.Text = "üîí ‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤"

-- ‡∏™‡πÑ‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß (‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏ß)
local speedLabel = Instance.new("TextLabel")
speedLabel.Parent = menuFrame
speedLabel.Size = UDim2.new(1, -20, 0, 30)
speedLabel.Position = UDim2.new(0, 10, 0, 90)
speedLabel.TextColor3 = Color3.new(1, 1, 1)
speedLabel.TextScaled = true
speedLabel.Text = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: " .. speed

local speedPlus = Instance.new("TextButton")
speedPlus.Parent = menuFrame
speedPlus.Size = UDim2.new(0.45, -10, 0, 40)
speedPlus.Position = UDim2.new(0.05, 0, 0, 130)
speedPlus.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
speedPlus.Text = "+"

local speedMinus = Instance.new("TextButton")
speedMinus.Parent = menuFrame
speedMinus.Size = UDim2.new(0.45, -10, 0, 40)
speedMinus.Position = UDim2.new(0.5, 10, 0, 130)
speedMinus.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
speedMinus.Text = "-"

-- üéØ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏≤‡∏®‡∏±‡∏ï‡∏£‡∏π‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏∏‡∏î (‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô)
local function getClosestEnemy()
	local char = player.Character
	if not char or not char:FindFirstChild("HumanoidRootPart") then return nil end
	
	local root = char.HumanoidRootPart
	local nearest = nil
	local nearestDist = math.huge
	
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local enemyRoot = plr.Character.HumanoidRootPart
			local dist = (enemyRoot.Position - root.Position).Magnitude
			if dist < maxDistance then
				local rayParams = RaycastParams.new()
				rayParams.FilterDescendantsInstances = {char}
				rayParams.FilterType = Enum.RaycastFilterType.Blacklist
				local result = workspace:Raycast(root.Position, (enemyRoot.Position - root.Position).Unit * dist, rayParams)
				if result and result.Instance:IsDescendantOf(plr.Character) then
					if dist < nearestDist then
						nearest = plr
						nearestDist = dist
					end
				end
			end
		end
	end
	return nearest
end

-- üîÑ ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏´‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¢‡∏π‡πà
RunService.RenderStepped:Connect(function()
	if locked and target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
		local enemyPos = target.Character.HumanoidRootPart.Position
		camera.CFrame = CFrame.new(camera.CFrame.Position, enemyPos)
	else
		if locked then
			locked = false
			target = nil
			lockButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
			lockButton.Text = "üîí ‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤"
		end
	end
	
	-- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
	local char = player.Character
	if char and char:FindFirstChild("Humanoid") then
		char.Humanoid.WalkSpeed = speed
	end
end)

-- üñ±Ô∏è ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π
toggleButton.MouseButton1Click:Connect(function()
	menuOpen = not menuOpen
	menuFrame.Visible = menuOpen
end)

-- üéØ ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤
lockButton.MouseButton1Click:Connect(function()
	if not locked then
		local enemy = getClosestEnemy()
		if enemy then
			target = enemy
			locked = true
			lockButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
			lockButton.Text = "‚úÖ ‡∏•‡πá‡∏≠‡∏Å: " .. enemy.Name
		else
			lockButton.Text = "‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤"
			task.wait(1)
			lockButton.Text = "üîí ‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤"
		end
	else
		locked = false
		target = nil
		lockButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
		lockButton.Text = "üîí ‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤"
	end
end)

-- ‚ö° ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
speedPlus.MouseButton1Click:Connect(function()
	speed = math.clamp(speed + 5, 16, 200)
	speedLabel.Text = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: " .. speed
end)

speedMinus.MouseButton1Click:Connect(function()
	speed = math.clamp(speed - 5, 16, 200)
	speedLabel.Text = "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß: " .. speed
end)
